import { FunctionComponent, useState } from "react";
import { xssSelector } from "@utils/generator/xssgenerator";
import { Button } from "@components/buttons";
import { XssPayloadsInterface } from "src/types/interface";
import * as Styled from "./style";
import { Result } from "./result";

const notInitialized: XssPayloadsInterface = { payload: "NotInitialized", description: "NotInitialized" };

export const RandomXssPayload: FunctionComponent = () => {
  const [randomPayload, setRandomPayload] = useState<XssPayloadsInterface>(notInitialized);

  const generateRandomPayload = () => {
    const createdPayload = xssSelector(randomPayload.payload);
    setRandomPayload(createdPayload);
  };

  return (
    <Styled.Container>
      <Button onClick={generateRandomPayload} txt="Click for XSS payload" />
      {randomPayload.payload !== "NotInitialized" && <Result randomPayload={randomPayload} />}
    </Styled.Container>
  );
};
